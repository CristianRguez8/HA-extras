{# Formatea un timestamp como dd/mm/YYYY #}
{%- macro formatearFecha(timestamp) -%}
{{ timestamp | timestamp_custom('%d/%m/%Y') }}
{%- endmacro -%}

{# Formatea un d√≠a a su nombre (compensa el +1 que a√±ade timestamp_custom('%w')) #}
{%- macro formatearDiaSemana(dia) -%}
{%- set dia = dia -1 %}
{%- if dia < 0 %}
{%- set dia = dia + 7 %}
{%- endif %}
{%- set diasSemana = {
  0: 'Lunes',
  1: 'Martes',
  2: 'Mi√©rcoles',
  3: 'Jueves',
  4: 'Viernes',
  5: 'S√°bado',
  6: 'Domingo'
} %}
{{ diasSemana.get(dia) }}
{%- endmacro -%}

{# P√°sale una cantidad y te devolver√° una 's' si es mayor que 1, √∫til para hacer plurales (por ejemplo gato{{pluralS(cantidadGatos)}} pintar√≠a 'gatos' si es mayor que 1) #}
{%- macro pluralS(i) -%}
{%- if i != 1 %}s{% endif %}
{%- endmacro -%}

{# P√°sale una cantidad y te devolver√° una 'n' si es mayor que 1, √∫til para hacer plurales (por ejemplo queda{{pluralN(cantidad)}} pintar√≠a 'quedan' si es mayor que 1) #}
{%- macro pluralN(i) -%}
{%- if i != 1 %}n{% endif %}
{%- endmacro -%}

{# Transforma el state de una entidad tipo clima a un texto que poder encadenar con 'Ahora mismo' #}
{%- macro traducirClimaActual(clima) -%}
{%- set climasActuales = {
  'cloudy': 'est√° nublado ‚òÅ',
  'fog': 'hay niebla üå´',
  'rainy': 'est√° lloviendo üåß',
  'partlycloudy': 'hay nubes y claros üå•',
  'clearnight': 'est√° la noche clara üåô',
  'sunny': 'est√° el cielo despejado ‚òÄ',
  'lightning': ' hay tormentas el√©ctricas üå©'
} -%}
{{ climasActuales.get(clima, 'no est√° claro el clima') }}
{%- endmacro -%}

{# Transforma el state de una entidad tipo clima a un texto que poder encadenar con 'Hoy se prevee' #}
{%- macro traducirClimaPrediccion(clima) -%}
{%- set prediccionesClima = {
  'cloudy': ' que est√© el cielo nublado ‚òÅ',
  'fog': ' que haya bancos de niebla üå´',
  'rainy': 'n lluvias üåß',
  'partlycloudy': ' que haya nubes y claros üå•',
  'clearnight': ' una noche clara üåô',
  'sunny': ' un d√≠a soleado ‚òÄ',
  'lightning': 'n tormentas el√©ctricas üå©'
} -%}
{{ prediccionesClima.get(clima, ' algo que no est√° claro') }}
{%- endmacro -%}

{# Convierte la direcci√≥n del viento en grados al punto cardinal desde el que se origina el viento #}
{%- macro traducirDireccionViento(direccion) -%}
{%- set direccionesViento = {
  0: 'norte',
  45: 'noreste',
  90: 'este',
  135: 'sureste',
  180: 'sur',
  225: 'suroeste',
  270: 'oeste',
  315: 'noroeste'
} -%}
{{ direccionesViento.get(direccion, direccion) }}
{%- endmacro -%}
